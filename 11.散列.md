#11.散列

##11.1 基本数据类型散列
对于**byte**,**short**,**int**和**char**这些基本类型数据，统一转为int类型，并把这个数值当做**散列值**。而对于**float**类型，则采用`Float.floatToIntBits(key)`的返回值作为散列值（该函数返回的int类型的二进制表示跟该float类型的二进制表示是一样的）。

对于**long**类型数据，最简单的做法是采用低4字节作为散列值，但long类型占有8字节数据，此种做法很容易引起**散列碰撞**，最好的做法是：
```Java
int hashCode = (int)(key^(key>>32));
```
将原来的key右移32位并与原来的key做**按位异或**操作，取低4字节作为散列值，这样long类型的高4字节和低4字节都参与了散列值的计算，大大降低了碰撞的概率。

而对应**double**类型数据，首先将key转为double表示（Double.doubleToLongBits(key)）,剩下的跟long的散列值一致：

```Java
long longkey = Double.doubleToLongBits(key);
int hashCode = (int)(longkey^(longkey>>32));
```

For search keys of the type byte,short,int, and char, simply cast them to int. Therefore,
two different search keys of any one of these types will have different hash codes.
For a search key of the type float, use Float.floatToIntBits(key)as the hash
code. Note that floatToIntBits(float f)returns an intvalue whose bit representation
is the same as the bit representation for the floating number f. Thus, two different search keys
of the floattype will have different hash codes.
For a search key of the type long, simply casting it to intwould not be a good choice,
because all keys that differ in only the first 32 bits will have the same hash code. To take the
first 32 bits into consideration, divide the 64 bits into two halves and perform the exclusive-or
operation to combine the two halves. This process is called folding. The hashing code for a
longkeyword is
inthashCode = (int)(key ^ (key >> 32));
Note that >>is the right-shift operator that shifts the bits 32 positions to the right. For example,1010110 >> 2yields0010101. The ^is the bitwise exclusive-or operator. It operates
on two corresponding bits of the binary operands. For example, 1010110 ^ 0110111yields
1100001. For more on bitwise operations, see Appendix G, Bitwise Operations.
For a search key of the type double, first convert it to a  long value using the
Double.doubleToLongBitsmethod, and then perform a folding as follows: 
longbits = Double.doubleToLongBits(key);
inthashCode = (int)(bits ^ (bits >> 32));

###11.1.3 String类型散列

###11.1.3 其他

##11.2 压缩散列码

##11.3 处理散列碰撞

##11.4 HashMap实现

